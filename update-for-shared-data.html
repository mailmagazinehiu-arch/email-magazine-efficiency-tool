<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>å…±æœ‰/å€‹äººãƒ‡ãƒ¼ã‚¿åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ã®è¿½åŠ ä¾‹</title>
</head>
<body>
    <h1>å®Ÿè£…ä¾‹ï¼šå…±æœ‰ãƒ‡ãƒ¼ã‚¿ã¨å€‹äººãƒ‡ãƒ¼ã‚¿ã®åˆ‡ã‚Šæ›¿ãˆ</h1>
    
    <h2>1. UI ã«ä¿å­˜å…ˆé¸æŠã‚’è¿½åŠ </h2>
    <pre><code>
&lt;div class="save-options"&gt;
    &lt;label&gt;
        &lt;input type="radio" name="saveLocation" value="personal" checked&gt;
        ğŸ”’ å€‹äººãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ä¿å­˜
    &lt;/label&gt;
    &lt;label&gt;
        &lt;input type="radio" name="saveLocation" value="shared"&gt;
        ğŸŒ å…±æœ‰ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ä¿å­˜
    &lt;/label&gt;
&lt;/div&gt;
    </code></pre>

    <h2>2. ä¿å­˜é–¢æ•°ã®ä¿®æ­£ä¾‹</h2>
    <pre><code>
// ä¿å­˜å…ˆã‚’åˆ¤å®šã™ã‚‹é–¢æ•°
function getSaveLocation() {
    const selectedLocation = document.querySelector('input[name="saveLocation"]:checked').value;
    if (selectedLocation === 'shared') {
        return 'common/files';
    } else {
        return `users/${currentUser.uid}/files`;
    }
}

// ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ™‚
window.saveFileData = () => {
    const saveLocation = getSaveLocation();
    const dataRef = database.ref(saveLocation).push();
    // ... ä¿å­˜å‡¦ç†
};
    </code></pre>

    <h2>3. ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã®ä¿®æ­£ä¾‹</h2>
    <pre><code>
// å€‹äººãƒ‡ãƒ¼ã‚¿ã¨å…±æœ‰ãƒ‡ãƒ¼ã‚¿ã®ä¸¡æ–¹ã‚’èª­ã¿è¾¼ã‚€
function loadAllData(userId) {
    // å€‹äººãƒ‡ãƒ¼ã‚¿
    const personalRef = database.ref(`users/${userId}/files`);
    personalRef.on('value', (snapshot) => {
        const personalData = snapshot.val() || {};
        displayData(personalData, 'personal');
    });
    
    // å…±æœ‰ãƒ‡ãƒ¼ã‚¿
    const sharedRef = database.ref('common/files');
    sharedRef.on('value', (snapshot) => {
        const sharedData = snapshot.val() || {};
        displayData(sharedData, 'shared');
    });
}
    </code></pre>

    <h2>4. è¡¨ç¤ºæ™‚ã«ã‚¿ã‚°ä»˜ã‘</h2>
    <pre><code>
function displayData(data, type) {
    Object.entries(data).forEach(([key, entry]) => {
        const tag = type === 'shared' ? 'ğŸŒ å…±æœ‰' : 'ğŸ”’ å€‹äºº';
        // è¡¨ç¤ºå‡¦ç†ã«ã‚¿ã‚°ã‚’è¿½åŠ 
    });
}
    </code></pre>
</body>
</html>